<!DOCTYPE html >
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->
<head>
    <!-- BASE META -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- SITE TITLE -->
    <title>森度</title>

    <!--SITE INFO -->
    <meta name="robots" content="index,follow">
    <meta name="author" content="cuican">
    <meta name="application-name" content="森度">
    <meta name="keywords" content="Thonatos,Thonatos.Yang,Grimrock,Juy">
    <meta name="description" content=""/>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>

    <!-- INCLUDE STYLE -->
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,500,700' rel='stylesheet' type='text/css'/>
    <link href="http://cdn.bootcss.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- SITE FAVICONS -->
    <link rel="shortcut icon" href="/images/favicon.ico"/>

    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/style-old-ie.min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="/css/style.min.css">
    <!--<![endif]-->

</head>
<body>
<div class="layout">
  <!--sidebar-->
  <div class="sidebar">
    <!-- Side Start -->
    <!-- Siderbar  -->
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="http://thinkdo.github.io" alt="森度"><img class="pure-img" src="/images/osbloglg.png"/></a></h1>
            <h2 class="brand-tagline">
                <small>森度的博客</small>
            </h2>
        </hgroup>

        <div id="sidebar_nav" class="pure-menu pure-menu-open">
            <ul>
                
                <li><a href="/">Home</a></li>
                
                <li><a href="/archives">Archives</a></li>
                
                <li><a href="/author">About</a></li>
                
            </ul>
        </div>
    </div>
    <!-- Side End-->
</div>

  <!--content-->
  
<div class="content pure-g">
    <div class=" pure-u-1">
        <!-- A wrapper for all the blog posts start -->
        <a href="#menu" id="menuLink" class="menu-link">
    <span></span>
</a>
<div class="content-header">
    <div id="content-header-nav" class="pure-menu pure-menu-open">
        <ul>
            <li><a href="http://thinkdo.github.io">森度</a></li>
            
            <li><a href="/">Home</a></li>
            
            <li><a href="/archives">Archives</a></li>
            
            <li><a href="/author">About</a></li>
            
        </ul>
    </div>
</div>

        <div class="posts">
            <h1 class="content-subhead"> Post </h1>

            <!-- A single blog post start -->

          <section class="post">
            <header class="post-header">
              <h2 class="post-title">react代码组件化--独立封装js文件</h2>
              <p class="post-meta">
    <time class="post-category post-category-design" datetime="2015-11-09T02:02:20.000Z" itemprop="datePublished">
        2015-11-09
    </time>
    
</p>
            </header>
            <div class="post-banner">
            </div>
            <div class="post-description">
              <p><a href="http://facebook.github.io/react/docs/getting-started.html" target="_blank" rel="external">参考文档</a><br>在浏览器端用browser.min.js编译jsx的方式很消耗时间，以下方式可将jsx语法的react代码在服务器端转换为普通的js文件，也就实现了react组件化。<br><strong>一、在终端中执行命令：npm install --global babel-cli</strong><br>babel-cli是babel提供的命令行转码工具，如果出现错误类似错误：<br>npm ERR! error rolling back   code: ‘EEXIST’,<br>npm ERR! error rolling back   path: ‘/Users/hanfeng/.nvm/v0.11.13/bin/babel’ }<br>npm ERR! Refusing to delete: /Users/hanfeng/.nvm/v0.11.13/bin/babel not in /Users/hanfeng/.nvm/v0.11.13/lib/node_modules/babel-cli<br>File exists: /Users/hanfeng/.nvm/v0.11.13/bin/babel<br>则rm掉相关文件夹<br><strong>二、在终端中执行命令： npm install babel-preset-react</strong><br>大家可能注意到了这个babel-preset-react不是全局安装的，即使为其加上–global标识进行全局安装，然后在工作目录中去执行第四个命令也是不行的，会报错，说找不到react命令。所以只能在工作目录中去安装该插件并在该工作目录下使用它。如果有其他人知道可以global中执行的话，请留言，不胜感激。<br><strong>三、这里，要拆分的helloworld.html如下：</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">'Content-type'</span> <span class="attr">content</span>=<span class="string">'text/html; charset=utf-8'</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../build/react.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">   		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../build/react-dom.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">   		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../build/browser.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"container"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/babel"</span>&gt;</span><span class="xml"></span></div><div class="line">			var HelloWorld = React.createClass(&#123;</div><div class="line">				render:function()&#123;</div><div class="line">					return <span class="tag">&lt;<span class="name">p</span>&gt;</span>第一个react程序！<span class="tag">&lt;/<span class="name">p</span>&gt;</span>;</div><div class="line">				&#125;</div><div class="line">			&#125;);</div><div class="line">			ReactDOM.render(<span class="tag">&lt;<span class="name">HelloWorld</span> /&gt;</span>,document.getElementById('container'));</div><div class="line">		<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>首先将jsx代码拆分出来单独放置在helloworld.js文件中，helloworld.js代码如下<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> HelloWorld = React.createClass(&#123;</div><div class="line">	<span class="attr">render</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>第一个react程序！<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">HelloWorld</span> /&gt;</span>,document.getElementById('container'));</span></div></pre></td></tr></table></figure></p>
<p><strong>四、切换到工作目录，运行命令：babel --presets react helloworld.js --watch --out-dir build</strong><br>这句命令的意思是，将helloworld.js转换成普通的javascript文件，放置为build文件夹下，名字仍为helloworld.js,并且其中的–watch属性表示会时刻监控源文件的变化，自动将最新的源文件进行转换。命令执行完毕后，将会在build文件夹下看到生成了一个helloworld.js文件。<br>如果想批量编译，只需将helloworld.js换成想要编译的源文件的父目录名称即可，比如helloworld.js在src目录下，就执行命令babel --presets react src --watch --out-dir build</p>
<p><strong>五、更改helloworld.html文件如下：</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">'Content-type'</span> <span class="attr">content</span>=<span class="string">'text/html; charset=utf-8'</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../build/react.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">   		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../build/react-dom.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"container"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../build/helloworld.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="comment">&lt;!--此处引入了转换后的js文件--&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>这时的helloworld.html与最开始的通过browser.min.js编译的helloworld.html效果是等同的</p>
<p>更多babel的使用方式可参考<a href="http://www.ruanyifeng.com/blog/2016/01/babel.html" target="_blank" rel="external">阮一峰老师的博文</a></p>

            </div>
          </section>

            <nav class="pagination" role="pagination">
    
    <a class="newer-posts" href="/2015/11/06/cssLayOut/">
        ← css的布局
    </a>
    
    <span class="page-number">•</span>
    
    <a class="older-posts" href="/2015/11/23/self-salvation/">
        自我救赎 →
    </a>
    
</nav>
            <div id="comment" class="comments-area">
    <h1 class="title"><a href="#disqus_comments" name="disqus_comments">Comments</a></h1>

    
    <div id="ds-thread" class="ds-thread" data-thread-key="2015/11/09/babel/" data-title="react代码组件化--独立封装js文件" data-url="http://thinkdo.github.io/2015/11/09/babel/"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"datoublog"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
    
</div>
            <!-- page-nav-start -->
            <div class="clear" style="height: 25px;">&nbsp;</div>
            <!-- A single blog post end -->
        </div>

        <!-- A wrapper for all the blog posts end -->
        <div class="footer">
    <p></p>
</div>
    </div>
</div>

</div>
<!-- footer start -->
<!-- Le javascript
================================================== -->
<!-- BASE JAVASCRIPT -->
<script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://www.thonatos.com/engine/wp-content/themes/Jure-v3/style/js/vendor/jquery-1.11.0.min.js"><\/script>')</script>
<script src="http://cdn.bootcss.com/highlight.js/8.1/highlight.min.js"></script>
<!--<script src="/style/js/plugin/jquery.highlight/highlight.min.js"></script>-->
<script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script>
<script src="http://cdn.bootcss.com/jquery.nicescroll/3.5.1/jquery.nicescroll.min.js"></script>
<!-- CUSTOM JAVASCRIPT -->
<!-- PLUGIN JAVASCRIPT -->
<script src="/js/app.js"></script>

</body>
</html>
